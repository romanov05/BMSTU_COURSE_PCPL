import telebot
import random

TOKEN = '8257128266:AAGJXji6fJoz64m32Vg3x-022BMUsYWdYJs'
bot = telebot.TeleBot(TOKEN)

movies = {
    '–∫–æ–º–µ–¥–∏—è': [
        '–ò–≤–∞–Ω –í–∞—Å–∏–ª—å–µ–≤–∏—á –º–µ–Ω—è–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏—é',
        '–û–ø–µ—Ä–∞—Ü–∏—è –´ –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –®—É—Ä–∏–∫–∞',
        '–î–∂–µ–Ω—Ç–ª—å–º–µ–Ω—ã —É–¥–∞—á–∏',
        '–ë—Ä–∏–ª–ª–∏–∞–Ω—Ç–æ–≤–∞—è —Ä—É–∫–∞',
        '–ö—Ä–∏–º–∏–Ω–∞–ª—å–Ω–æ–µ —á—Ç–∏–≤–æ'
    ],
    '—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞': [
        '–ú–∞—Ç—Ä–∏—Ü–∞',
        '–ó–≤–µ–∑–¥–Ω—ã–µ –≤–æ–π–Ω—ã: –ò–º–ø–µ—Ä–∏—è –Ω–∞–Ω–æ—Å–∏—Ç –æ—Ç–≤–µ—Ç–Ω—ã–π —É–¥–∞—Ä',
        '–ù–∞—á–∞–ª–æ',
        '–ü—è—Ç—ã–π —ç–ª–µ–º–µ–Ω—Ç',
        '–ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä'
    ],
    '–±–æ–µ–≤–∏–∫': [
        '–£–∫—Ä–æ—â–µ–Ω–∏–µ —Å—Ç—Ä–æ–ø—Ç–∏–≤–æ–≥–æ',
        '–¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä 2: –°—É–¥–Ω—ã–π –¥–µ–Ω—å',
        '–ö—Ä–µ–ø–∫–∏–π –æ—Ä–µ—à–µ–∫',
        '–ë–µ–∑—É–º–Ω—ã–π –ú–∞–∫—Å: –î–æ—Ä–æ–≥–∞ —è—Ä–æ—Å—Ç–∏',
        '–õ–µ–æ–Ω'
    ],
    '–¥—Ä–∞–º–∞': [
        '–ü–æ–±–µ–≥ –∏–∑ –®–æ—É—à–µ–Ω–∫–∞',
        '–ó–µ–ª–µ–Ω–∞—è –º–∏–ª—è',
        '–§–æ—Ä—Ä–µ—Å—Ç –ì–∞–º–ø',
        '–ö—Ä–µ—Å—Ç–Ω—ã–π –æ—Ç–µ—Ü',
        '–°–ø–∏—Å–æ–∫ –®–∏–Ω–¥–ª–µ—Ä–∞'
    ],
    '—É–∂–∞—Å—ã': [
        '–°–∏—è–Ω–∏–µ',
        '–ß—É–∂–æ–π',
        '–û–Ω–æ',
        '–ü—Å–∏—Ö–æ',
        '–•–∏–∂–∏–Ω–∞ –≤ –ª–µ—Å—É'
    ]
}

# –ö–æ–º–∞–Ω–¥–∞ /start
@bot.message_handler(commands=['start'])
def start(message):
    markup = telebot.types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)

    btn_random = telebot.types.KeyboardButton('üé≤ –°–ª—É—á–∞–π–Ω—ã–π —Ñ–∏–ª—å–º')
    btn_comedy = telebot.types.KeyboardButton('üòÇ –ö–æ–º–µ–¥–∏—è')
    btn_fantasy = telebot.types.KeyboardButton('üöÄ –§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞')
    btn_action = telebot.types.KeyboardButton('üí• –ë–æ–µ–≤–∏–∫')
    btn_drama = telebot.types.KeyboardButton('üé≠ –î—Ä–∞–º–∞')
    btn_horror = telebot.types.KeyboardButton('üëª –£–∂–∞—Å—ã')
    
    markup.add(btn_random, btn_comedy, btn_fantasy, btn_action, btn_drama, btn_horror)
    
    bot.send_message(
        message.chat.id,
        f"–ü—Ä–∏–≤–µ—Ç, {message.from_user.first_name}!\n"
        "–Ø –±–æ—Ç –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ñ–∏–ª—å–º–æ–≤.\n"
        "–í—ã–±–µ—Ä–∏ –∂–∞–Ω—Ä –∏–ª–∏ –ø–æ–ª—É—á–∏ —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∏–ª—å–º:",
        reply_markup=markup
    )
    
    help_text = """
–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
/start - –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
/help - –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∂–∞–Ω—Ä–∞ —Ñ–∏–ª—å–º–∞:
üé≤ –°–ª—É—á–∞–π–Ω—ã–π —Ñ–∏–ª—å–º - —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∏–ª—å–º –∏–∑ –≤—Å–µ—Ö –∂–∞–Ω—Ä–æ–≤
üòÇ –ö–æ–º–µ–¥–∏—è - —Å–ª—É—á–∞–π–Ω–∞—è –∫–æ–º–µ–¥–∏—è
üöÄ –§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞ - —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å–º
üí• –ë–æ–µ–≤–∏–∫ - —Å–ª—É—á–∞–π–Ω—ã–π –±–æ–µ–≤–∏–∫
üé≠ –î—Ä–∞–º–∞ - —Å–ª—É—á–∞–π–Ω–∞—è –¥—Ä–∞–º–∞
üëª –£–∂–∞—Å—ã - —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∏–ª—å–º —É–∂–∞—Å–æ–≤
    """
    bot.send_message(message.chat.id, help_text)

# –ö–æ–º–∞–Ω–¥–∞ /help
@bot.message_handler(commands=['help'])
def help_command(message):
    help_text = """
–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
/start - –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
/help - –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∂–∞–Ω—Ä–∞ —Ñ–∏–ª—å–º–∞:
üé≤ –°–ª—É—á–∞–π–Ω—ã–π —Ñ–∏–ª—å–º - —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∏–ª—å–º –∏–∑ –≤—Å–µ—Ö –∂–∞–Ω—Ä–æ–≤
üòÇ –ö–æ–º–µ–¥–∏—è - —Å–ª—É—á–∞–π–Ω–∞—è –∫–æ–º–µ–¥–∏—è
üöÄ –§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞ - —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å–º
üí• –ë–æ–µ–≤–∏–∫ - —Å–ª—É—á–∞–π–Ω—ã–π –±–æ–µ–≤–∏–∫
üé≠ –î—Ä–∞–º–∞ - —Å–ª—É—á–∞–π–Ω–∞—è –¥—Ä–∞–º–∞
üëª –£–∂–∞—Å—ã - —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∏–ª—å–º —É–∂–∞—Å–æ–≤
    """
    bot.send_message(message.chat.id, help_text)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫)
@bot.message_handler(content_types=['text'])
def handle_text(message):
    if message.text == 'üé≤ –°–ª—É—á–∞–π–Ω—ã–π —Ñ–∏–ª—å–º':
        all_films = []
        for genre_list in movies.values():
            all_films.extend(genre_list)
        random_film = random.choice(all_films)
        bot.send_message(message.chat.id, f"üé¨ –†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å: ¬´{random_film}¬ª")
        
    elif message.text in ['üòÇ –ö–æ–º–µ–¥–∏—è', 'üöÄ –§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞', 'üí• –ë–æ–µ–≤–∏–∫', 'üé≠ –î—Ä–∞–º–∞', 'üëª –£–∂–∞—Å—ã']:
        genre_map = {
            'üòÇ –ö–æ–º–µ–¥–∏—è': '–∫–æ–º–µ–¥–∏—è',
            'üöÄ –§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞': '—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞',
            'üí• –ë–æ–µ–≤–∏–∫': '–±–æ–µ–≤–∏–∫',
            'üé≠ –î—Ä–∞–º–∞': '–¥—Ä–∞–º–∞',
            'üëª –£–∂–∞—Å—ã': '—É–∂–∞—Å—ã'
        }
        genre = genre_map[message.text]
        if genre in movies:
            random_film = random.choice(movies[genre])
            bot.send_message(message.chat.id, f"üé¨ –†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑ –∂–∞–Ω—Ä–∞ ¬´{genre}¬ª: ¬´{random_film}¬ª")
        else:
            bot.send_message(message.chat.id, "–ò–∑–≤–∏–Ω–∏—Ç–µ, —Ñ–∏–ª—å–º–æ–≤ —ç—Ç–æ–≥–æ –∂–∞–Ω—Ä–∞ –ø–æ–∫–∞ –Ω–µ—Ç –≤ –±–∞–∑–µ.")
    
    else:
        bot.send_message(message.chat.id, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞")

if __name__ == '__main__':
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
    bot.polling(none_stop=True)